Disclaimer: Depending on when you are looking at these instructions, you may have to make some adjustments. For example, you can set up the conda enviroment of the igwn for a later "version" (i.e. igwn-py310)
**************************
## My MacOs environment
1. ```xcode-select --install```
2. ```softwareupdate --all --install --force`
3. ```sudo xcode-select --switch /Library/Developer/CommandLineTools```
4. ``` gcc -v ```
5. ```gcc -11 -v```
Note that 4 and 5 should give something (not error)
6. Change the default python version to python3 ```ln -s -f /usr/local/bin/python3 /usr/local/bin/python```
7. ```wget https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh -O ```
8. ```~/miniconda.sh```
9. ```source /Users/name/miniconda/bin/activate```
10. ```conda init zsh```
11. ```brew install miniconda```
12. Enabling openning jupyter lab with ```jupyter lab```:
    ```conda install -c conda-forge jupyterlab```
    ```nano .zshrc``` and write ```export PATH="$HOME/.local/bin:$PATH"```
13. ```pip install jupyterlab_hdf```
14. ```conda install -c conda-forge jupyterlab jupyterlab-git```

### CVMFS for MacOS
Install CVFMS https://computing.docs.ligo.org/guide/cvmfs/
1. Install Fuse for [MacOS](https://osxfuse.github.io/)
2. Install CVMFS pkg from here [link](https://cernvm.cern.ch/fs/)
    probably you have to write something like ```curl -o ~/Downloads/cvmfs-2.11.2.pkg https://ecsft.cern.ch/dist/cvmfs/cvmfs-2.11.2/cvmfs-2.11.2.pkg```
3. ```git clone https://github.com/opensciencegrid/cvmfs-config-osg.git /tmp/cvmfs-config-osg```
4. ```cd /tmp/cvmfs-config-osg```
5. depending on the version maybe you need to ```nano Makefile``` and then delete the "-D"
6. ```sudo make install -C /tmp/cvmfs-config-osg```
7. ```rm -rf /tmp/cvmfs-config-osg```
8. ```sudo ln -s /etc/cvmfs/config.d/config-osg.opensciencegrid.org.conf /etc/cvmfs/default.d/```
9. ```sudo mkdir -p /cvmfs/config-osg.opensciencegrid.org```
10. ```sudo mount -t cvmfs config-osg.opensciencegrid.org /cvmfs/config-osg.opensciencegrid.org```
11. ```sudo cvmfs_config setup```
12. Create a default.local configuration for CVMFS that references the repositories you care about
    ```cd /etc/cvmfs/``` and then create default.local: 
    ```
    sudo bash -c 'cat > /etc/cvmfs/default.local' << EOF
    CVMFS_REPOSITORIES=oasis.opensciencegrid.org,virgo.infn.it,gwosc.osgstorage.org
    CVMFS_QUOTA_LIMIT=20000
    CVMFS_HTTP_PROXY=DIRECT
    EOF
    ``` 
13. ```cd /etc/cvmfs/default.d/```
14. create and edit 60-osg.conf to have these lines:
    ```
    # /etc/cvmfs/default.d/60-osg.conf
    #
    # DO NOT EDIT THIS FILE
    # It will be replaced on upgrade. To override, edit /etc/cvmfs/default.local
    #
    CVMFS_SEND_INFO_HEADER=yes
    CVMFS_KEYS_DIR=/etc/cvmfs/keys/opensciencegrid.org
    CVMFS_USE_GEOAPI=yes
    CVMFS_CONFIG_REPOSITORY=config-osg.opensciencegrid.org
    CVMFS_CONFIG_REPO_REQUIRED=yes
    CVMFS_FALLBACK_PROXY=http://cvmfsbproxy.cern.ch:3126;http://cvmfsbproxy.fnal.gov:3126
    ```
15. create and edit config-osg.opensciencegrid.org.conf to have single line:
    ```
    CVMFS_SERVER_URL=http://cvmfs-s1bnl.opensciencegrid.org:8000/cvmfs/@fqrn@;http://cvmfs-s1fnal.opensciencegrid.org:8000/cvmfs/@fqrn@;http://cvmfs-s1goc.opensciencegrid.org:8000/cvmfs/@fqrn@
    ```
16. ```sudo mkdir -p /cvmfs/config-osg.opensciencegrid.org```
17. ```sudo mount -t cvmfs config-osg.opensciencegrid.org /cvmfs/config-osg.opensciencegrid.org```
18. ```sudo mkdir -p /cvmfs/oasis.opensciencegrid.org```
19. ```sudo mount -t cvmfs oasis.opensciencegrid.org /cvmfs/oasis.opensciencegrid.org```
20. ```sudo mkdir /cvmfs/gwosc.osgstorage.org```
21. ```sudo mount -t cvmfs gwosc.osgstorage.org /cvmfs/gwosc.osgstorage.org```
22. ```cvmfs_config probe``` “or” ```cvmfs_config probe oasis.opensciencegrid.org``` or```cvmfs_config probe gwosc.osgstorage.org```
23. to find the bulk data from observation runs, change directory to be /cvmfs/gwosc.osgstorage
    ```cd /cvmfs/gwosc.osgstorage.org/```
24. ```ls -lh /cvmfs/oasis.opensciencegrid.org``` (you should see something)
25. ```ls -lh /cvmfs/oasis.opensciencegrid.org/ligo/sw``` (you should see something)

NOTE: steps 17, 19, 21 and 22 should be regularly rerunned

### IGWN-PY39
Download one of the environment YAML files (currently igwn-py39, see Environments).
1. ```conda config --add channels conda-forge```
2. ```conda env create --file igwn-py39.yaml```
3. ```source activate igwn-py39```
4. ```conda update -n base -c defaults conda```
5. ```conda env list```
    then you should see something like:
    ```# conda environments:
        base                  *  /opt/miniconda
        igwn-py39                /opt/miniconda/envs/igwn-py39```
6. activate/deactivate environment
7. make alias for activating the environment:
```sudo nano ~/.bash_profile``` and add
    ```
    alias igwn39='conda activate igwn-py39'
    alias deac='conda deactivate'
    ```
*Note that if you immediatly want to activate the environment: Open the terminal and write source ~/.bash_profile , then igwn39*









